{
	id: loa2_l5_castle_of_the_chaos_wizard__throne_room__after_first_boss_defeated_cutscene,
	controlledActions: {
		wait_after_first_boss_defeated: {
			startsWithCutscene: true,
			
            type: WAIT,
            
            executionDelayInSeconds: 3f,
            
            executes: [
                thorin_comment,
			],
		},
		
		thorin_comment: {
			type: SHOW_ON_SCREEN_TEXT,
            
			executionDelayInSeconds: 1f,
			
            executionParameters: {
                displayTextHeader: "Thorin",
                displayText: "Pathetic dragon...\n             \nNow let's find that Strange Chaos Wizard Guy!    ",
                showNextPageIcon: true,
			}
            
            waitForEventToFinish: true,
            
            executes: [
                move_thorin_to_chaos_wizard_1,
			],
		},
	
		move_thorin_to_chaos_wizard_1: {
			type: MOVE,
			controlledUnitId: PLAYER,
			targetPositionRelativeToUnitId: _function_call(loa2_l5_castle_of_the_chaos_wizard__throne_room__cutscene_after_first_boss_defeated__get_thorin_target_position),
			controlledUnitTarget: {x: 0, y: 0},
			
			executes: [
                move_thorin_to_chaos_wizard_2,
			]
		},
		
		move_thorin_to_chaos_wizard_2: {
            type: MOVE,
            controlledUnitId: PLAYER,
			targetPositionRelativeToUnitId: _function_call(loa2_l5_castle_of_the_chaos_wizard__throne_room__cutscene_after_first_boss_defeated__get_thorin_target_position),
            controlledUnitTarget: {x: 0, y: 0},
            
			executes: [
                move_thorin_to_chaos_wizard_3,
			]
		},
		
		move_thorin_to_chaos_wizard_3: {
            type: MOVE,
            controlledUnitId: PLAYER,
			targetPositionRelativeToUnitId: cutscene_object__chaos_wizard_dialog__thorin_position__after_first_boss,
            controlledUnitTarget: {x: 0, y: 0},
            
			executes: [
                move_camera_till_chaos_wizard_is_visible,
			]
		},
		
		move_camera_till_chaos_wizard_is_visible: {
			type: MOVE_CAMERA,
			targetPositionRelativeToUnitId: cutscene_object__chaos_wizard_dialog__thorin_position__after_first_boss,
			updatePositionRelativeToTarget: true,
			controlledUnitTarget: {x: 0, y: 1},
			speedFactor: 3f,
			
			executes: [
				chaos_wizard_1
			],
		},
		
		chaos_wizard_1: {
            type: SHOW_ON_SCREEN_TEXT,
            
			executionDelayInSeconds: 0.5f,
            
            executionParameters: {
                displayTextHeader: "Strange Chaos Wizard Guy",
                colorHeader: #850085,
                displayText: "You managed to defeat Fafnir...\n              \nImpressive ... but within expectations.     ",
                showNextPageIcon: true,
			}
            
            waitForEventToFinish: true,
            
            executes: [
                thorin_1,
			],
		},
		
		thorin_1: {
            type: SHOW_ON_SCREEN_TEXT,
            
            executionParameters: {
                displayTextHeader: "Thorin",
                displayText: "Your minions are no match for a Dwarf!\n                 \nAnd now there's nothing stopping me from ramming my axe into your skull!!!       ",
                showNextPageIcon: true,
			}
            
            waitForEventToFinish: true,
            
            executes: [
            	chaos_wizard_evil_laugh_1,
                chaos_wizard_2,
			],
		},
		
		chaos_wizard_evil_laugh_1: {
			type: PLAY_SOUND,
			
			executionDelayInSeconds: 0f,
			
            soundEffectName: evil_laugh,
		},
		
		chaos_wizard_2: {
            type: SHOW_ON_SCREEN_TEXT,
            
            executionParameters: {
                displayTextHeader: "Strange Chaos Wizard Guy",
                colorHeader: #850085,
                displayText: "*evil laughter*\n                                         \nYou didn't really think I have only one Minion, did you?    ",
                showNextPageIcon: true,
			}
            
            waitForEventToFinish: true,
            
            executes: [
                chaos_wizard_3,
			],
		},
		
		chaos_wizard_3: {
            type: SHOW_ON_SCREEN_TEXT,
            
            executionParameters: {
                displayTextHeader: "Strange Chaos Wizard Guy",
                colorHeader: #850085,
                displayText: "This is the final chapter of our little game, Thorin!         \nAnd you thought the final boss battle had only one phase...?             \nWill you ever learn?!      ",
                showNextPageIcon: true,
			}
            
            waitForEventToFinish: true,
            
            executes: [
                spawn_arch_angel,
                turn_arround_thorin,
                play_sound_effect_spawn_arch_angel,
                chaos_wizard_4,
			],
		},
		
		spawn_arch_angel: {
            type: EVENT,
            
            executionDelayInSeconds: 2f,
            
            event: {
            	eventType: CUSTCENE_SPAWN_UNIT,
            	stringValue: archangel,
            }
		},
		
		turn_arround_thorin: {
            type: MOVE,
            
            executionDelayInSeconds: 3f,
            
            controlledUnitId: PLAYER,
            controlledUnitTarget: {x: -0.1, y: 0},
		},
		
		play_sound_effect_spawn_arch_angel: {
            type: PLAY_SOUND,
            
            executionDelayInSeconds: 1.5f,
            
            soundEffectName: spawn_2,
		},
		
		chaos_wizard_4: {
            type: SHOW_ON_SCREEN_TEXT,
            
            executionParameters: {
                displayTextHeader: "Strange Chaos Wizard Guy",
                colorHeader: #850085,
                displayText: "Dellingr, could you please get rid of this annoying dwarf for me?      ",
                showNextPageIcon: true,
                canBeSkipped: false,
			}
            
            waitForEventToFinish: true,
            
            executes: [
                move_camera_till_dellignir_is_visible,
			],
		},
		
		move_camera_till_dellignir_is_visible: {
			type: MOVE_CAMERA,
			targetPositionRelativeToUnitId: cutscene_object__chaos_wizard_dialog__thorin_position__after_first_boss,
			updatePositionRelativeToTarget: true,
			controlledUnitTarget: {x: -3, y: 0},
			speedFactor: 2f,
			
			executes: [
				play_sound_effect_enable_magic_pipes,
				enable_magic_pipes
			],
		},
		
		play_sound_effect_enable_magic_pipes: {
            type: PLAY_SOUND,
            
            executionDelayInSeconds: 0f,
            
            soundEffectName: power_up,
		},
		
		enable_magic_pipes: {
            type: EVENT,
            
            executionDelayInSeconds: 2f,
            
            event: {
                eventType: CONFIG_GENERATED_EVENT,
                stringValue: "loa2_l5_castle_of_the_chaos_wizard__enable_magic_pipes",
			},
            
            executes: [
            	stop_background_music,
            	start_boss_fight,
                wait_before_starting_boss_fight,
			]
		},
		
		stop_background_music: {
            type: EVENT,
            
            executionDelayInSeconds: 3f,
            
            event: {
                eventType: STOP_BACKGROUND_MUSIC,
                booleanValue: true, // fade out
			}
			
			executes: [
				play_boss_fight_music,
			]
		},
		
		play_boss_fight_music: {
            type: EVENT,
            
            event: {
                eventType: ADD_BACKGROUND_MUSIC_TO_QUEUE, // add to queue is needed because of the fade out of the previous music
                stringValue: boss_fight,
                floatValue: 0f, // delay in seconds
                booleanValue: true,  // fade in
			}
		},
		
		start_boss_fight: {
			type: EVENT,
			executionDelayInSeconds: 3f,
			
			event: {
				eventType: BOSS_ENEMY_SHOW,
			},
		}
		
		wait_before_starting_boss_fight: {
            type: WAIT,
            
            executionDelayInSeconds: 6f,
            
            executes: [
                end,
			],
		},
		
		end: {
			type: WAIT,
			executionDelayInSeconds: 0f,
		}
	}
}